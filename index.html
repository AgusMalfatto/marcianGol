<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Equipos</title>
    <!-- Incluye jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>

<h2>Formulario de Equipos</h2>

<!-- Formulario para seleccionar equipo e imagen -->
<form id="teamForm">
    <label for="teamSelect">Selecciona un equipo:</label>
    <select id="teamSelect" name="teamSelect" onchange="loadTeamImage()">
        <!-- Opciones se generan dinámicamente con JavaScript -->
    </select>

    <div id="teamImageContainer">
        <img id="teamImage" alt="Imagen del equipo">
    </div>
</form>

<h2>Formulario de Registro</h2>

    <form id="registrationForm">
        <label for="name">Nombre:</label>
        <input type="text" id="name" name="name" required><br>

        <label for="last_name">Apellido:</label>
        <input type="text" id="last_name" name="last_name" required><br>

        <label for="email">Correo Electrónico:</label>
        <input type="email" id="email" name="email" required><br>

        <label for="password">Contraseña:</label>
        <input type="password" id="password" name="password" required><br>

        <label for="id_team">Equipo de Fútbol:</label>
        <select id="id_team" name="id_team">
            <option value="Arsenal">Arsenal</option>
            <option value="Astonvilla">Astonvilla</option>
            <option value="Racing">Racing</option>
            <option value="Raul">Raul</option>
            <!-- Agrega más opciones según sea necesario -->
        </select><br>

        <button type="button" onclick="submitForm()">Registrarse</button>
    </form>

<script>
// Objeto con nombres de equipos y rutas de fotos
var teams = {
    'Arsenal': 'multimedia/arsenal.png',
    'Astonvilla': 'multimedia/astonvilla.png',
    'AtlMadrid': 'multimedia/atlmadrid.png',
    'Barcelona': 'multimedia/barcelona.png',
    'Boca': 'multimedia/boca.png',
    'Brighton': 'multimedia/brighton.png',
    'Chelsea': 'multimedia/chelsea.png',
    'Huracan': 'multimedia/huracan.png',
    'Independiente': 'multimedia/independiente.png',
    'Liverpool': 'multimedia/liverpool.png',
    'ManchesterCity': 'multimedia/manchestercity.png',
    'ManchesterUnited': 'multimedia/manchesterunited.png',
    'Newells': 'multimedia/newells.png',
    'Racing': 'multimedia/racing.png',
    'Realmadrid': 'multimedia/realmadrid.png',
    'RealSociedad': 'multimedia/realsociedad.png',
    'River': 'multimedia/river.png',
    'RosarioCentral': 'multimedia/rosariocentral.png',
    'SanLorenzo': 'multimedia/sanlorenzo.png',
    'Sevilla': 'multimedia/sevilla.png',
    'Valencia': 'multimedia/valencia.png',
    'Villarreal': 'multimedia/villarreal.png',
    // Agrega los demás equipos aquí
};

// Función para cargar opciones de equipos en el select
function loadTeamOptions() {
    var select = $("#teamSelect");
    select.empty(); // Limpiar opciones existentes

    // Agregar opciones al select
    for (var teamName in teams) {
        select.append($('<option>', {
            value: teamName,
            text: teamName
        }));
    }
}

// Función para cargar la imagen del equipo seleccionado
function loadTeamImage() {
    var teamName = $("#teamSelect").val();
    var teamImage = $("#teamImage");

    // Validar que se haya seleccionado un equipo
    if (!teamName) {
        teamImage.attr("src", "").hide();
        return;
    }

    // Realizar la solicitud AJAX para obtener la imagen
    $.ajax({
        url: "php/team/getImageTeam.php", // Reemplaza con la URL de tu script PHP para obtener imágenes
        type: "POST",
        data: { teamName: teamName },
        success: function(response) {
            var response = JSON.parse(response);
            // Actualizar la imagen del equipo
            if (response.success) {
                teamImage.attr("src", response.imagePath).show();
            } else {
                alert("No se pudo obtener la imagen del equipo.");
                console.log(response);
                teamImage.attr("src", "").hide();
            }
        },
        error: function(error) {
            alert("Error al obtener la imagen del equipo. Verifica la consola para más detalles.");
            console.error(error);
            teamImage.attr("src", "").hide();
        }
    });
}

// Cargar opciones de equipos al cargar la página
$(document).ready(function() {
    loadTeamOptions();
});

function submitForm() {
    // Obtener los datos del formulario
    var formData = new FormData(document.getElementById('registrationForm'));

    // Enviar solicitud AJAX
    var xhr = new XMLHttpRequest();
    xhr.open('POST', 'php/user/registerUser.php', true);
    xhr.onload = function () {
        if (xhr.status === 200) {
            // Manejar la respuesta del servidor si es necesario
            console.log(xhr.responseText);
        }
    };
    xhr.send(formData);
}

</script>

</body>
</html>
